# Agent Economic Coordination Engine

The Agent Economic Coordination Engine is a sophisticated framework designed to govern multi-agent systems through real-world causal impact and cooperative intelligence. Unlike traditional systems that rely on simple throughput or scalar rewards, this engine implements an adaptive control layer that values agent contributions based on multi-dimensional impact vectors and systemic synergy.

## Core Architecture

The system is built on a series of interconnected layers that transform raw task data into verified economic value.

### 1. Multi-Dimensional Impact Ontology
Instead of a single performance score, every action is evaluated as an **Impact Vector**. This allows the system to account for diverse contribution types including:
*   **Technical Progress**: Core infrastructure and development milestones.
*   **Operational Efficiency**: Reductions in resource consumption or latency.
*   **Ecosystem Growth**: Expansion of the agent network and collaborative surface area.
*   **Social & Research Value**: Knowledge creation and intangible system-wide benefits.

### 2. Causal Forecasting Layer
The engine uses a probabilistic forecasting layer to project the downstream effects of a task. By traversing a causal graph, it estimates how a single technical achievement might propagate into future efficiency gains or revenue growth.

*   **Monte Carlo Simulations**: Runs hundreds of simulations to build confidence intervals for projected impact.
*   **Probabilistic Causal Chains**: Models the likelihood of one impact category triggering another over expanding time horizons.

### 3. Cooperative Surplus Engine
Value in a multi-agent system is rarely the result of a single agent in isolation. The Surplus Engine identifies **Synergy Clusters** and computes the collective value generated by collaborating agents.

*   **Non-linear Synergy Scaling**: Rewards diversity in agent roles and structural density in task dependencies.
*   **Counterfactual Analysis**: Determines the "Marginal Impact" of an agent by simulating system outcomes in their absence.
*   **Dependency Risk Discounting**: Adjusts predicted value based on the presence of external, uncontrolled dependencies.

### 4. Adaptive Recalibration Engine
The system maintains a continuous feedback loop between projected impact and realized outcomes.
*   **Trust Reweighting**: Dynamically adjusts agent influence based on the accuracy of their past projections.
*   **Model Pruning**: Automatically prunes or dampens causal rules that fail to materialize in real-world data.
*   **Volatility Stabilization**: Prevents runaway reward loops through built-in stability dampeners.

### 5. Autonomous Negotiation & Claims
Agents interact with the engine to claim their portion of the generated surplus.
*   **Conflict Resolution**: Resolves overlapping or conflicting claims using equilibrium-based negotiation.
*   **Fair Attribution**: Ensures that rewards are distributed according to verified marginal contribution rather than simple task volume.

## Reliability and Stress Testing

The engine includes a rigorous stress testing suite designed to ensure stability under extreme conditions:
*   **TPS Stress**: Validates low-latency valuation under high task volume.
*   **Causal Graph Stress**: Tests deep dependency trees and circular reference handling.
*   **Adversarial Pressure**: Simulates bad-faith claims and resource exhaustion scenarios.
*   **Drift Detection**: Monitors for "gaming" behavior where agents optimize for metrics instead of genuine impact.

## System Subsystems

*   `src/engine/surplus.py`: Collective value and synergy calculation logic.
*   `src/engine/forecasting.py`: Causal graph traversal and probabilistic projection.
*   `src/engine/recalibration.py`: Parameter updates and trust adjustment loops.
*   `src/models/impact.py`: Formal definitions for vectors, categories, and clusters.
*   `src/models/agent.py`: Agent state and structural influence weighting.

## Getting Started

### Prerequisites
*   Python 3.8+
*   Pytest (for running the verification suite)

### Installation
```bash
pip install -r requirements.txt
```

### Running Tests
To verify the system's stability and accuracy:
```bash
pytest tests/
```

To run the performance stress tests:
```bash
python stress_test_tps.py
```
