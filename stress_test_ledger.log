--- Starting Ledger Integrity Stress Test ---
Generating 1000000 entries across 50000 events...
  Processed 10000 events (200000 entries)...
  Processed 20000 events (400000 entries)...
  Processed 30000 events (600000 entries)...
  Processed 40000 events (800000 entries)...
  Processed 50000 events (1000000 entries)...
Generation completed in 11.98 seconds (83471.61 entries/sec).
Running audit...
Audit Results: {'entry_count': 1000000, 'net_balance': 0.0, 'integrity_check': 'passed', 'system_issuance': -252796004.64}
Testing balance retrieval performance...
Avg balance retrieval time: 0.046980 seconds.

--- Starting Concurrency & Race Condition Test ---
Initial balance for rich_agent: 1000000.0
Starting 20 threads for concurrent allocation...
Total successful allocations: 2000
Final Agent Balance: 980000.0
Final Fund Balance: 20000.0
Audit: {'entry_count': 4002, 'net_balance': 0.0, 'integrity_check': 'passed', 'system_issuance': -1000000.0}
Attempting to over-allocate (double spend)...
Last valid allocation result: True
Over-allocation result: False
Balance after over-allocation attempt: 0.0

ALL LEDGER STRESS TESTS PASSED
